{% extends 'todoApp/base.html' %}
{% block content %}
{{ error }}
<br>
<hr>
<h1>{{ todo.title }}</h1>
{{ todo.memo }}<hr>
<h3>Authored by <a href="{% url 'userProfile:viewprofile' todo.author.id %}">
          {% if self %}
               you
          {% else %}
              {{ todo.author.name }}
          {% endif %}
     </a> on {{ todo.created|date:'dS M Y H:i' }}</h3>

{% if important %}
     <b>
     {{ todo.important }}
     </b>
{% endif %}
{% if self %}
     <form method="GET" action="{% url 'edittodo' todo.id %}">
          {% csrf_token %}
     <button type="submit">Edit</button>
     </form>
     <form method="POST" action="{% url 'deletetodo' todo.id %}">
          {% csrf_token %}
          <button type="submit">Delete</button>
     </form>
{% endif %}
{% if submitted %}
{% else %}
<form method="POST" action="{% url 'completetodo' todo.id %}">
     {% csrf_token %}
<button type="submit">Complete</button>
</form>
{% endif %}
<h1>Completed by {{ count }} user{{ count|pluralize }}.</h1>
<ul>
{% for submission in submissions %}
<li>
     <b><a href="{% url 'userProfile:viewprofile' submission.submitter.id %}">{{ submission.submitter.user.first_name }} {{ submission.submitter.user.last_name }}</a></b>
     On {{ submission.date_submitted|date:'dS M Y H:i' }}
</li>
{% endfor %}
</ul>

{% endblock %}